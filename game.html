<!DOCTYPE html>
<html>
	<head>
		<title>MAFIA</title>
		<link rel="stylesheet" type="text/css" href="styles/style.css" />
		<link rel="stylesheet" type="text/css" href="styles/css/style.css" />

		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
			crossorigin="anonymous"
		/>
		<script
			src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
			integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
			integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
			crossorigin="anonymous"
		></script>
		<script
			src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
			integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
			crossorigin="anonymous"
		></script>
	</head>

	<script src="/socket.io/socket.io.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script>
		$(function() {
			var socket = io('/game');
			var room = '';
			$('#chat_input').submit(function(e) {
				e.preventDefault(); // prevents page reloading
				socket.emit('chat message', [room, $('#m').val()]); //when a user sends a message, send it to server as 'chat message' event
				$('#m').val('');
				return false;
			});
			socket.on('new chat', function(msg) {
				$('#messages').append($('<li>').text(msg));
			});
			socket.on('room update', package => {
				room = package.roomcode;
				for (i in package.chatHistory) {
					$('#messages').append($('<li>').text(package.chatHistory[i]));
				}
			});
		});
	</script>
	<body>
		<div class="container-fluid height-full">
			<h1>Mafia</h1>
			<div class="row justify-content-center">
				<div class="col-4">
					<div id="chatbox">
						<ul id="messages"></ul>
						<form id="chat_input" action="">
							<input id="m" autocomplete="off" />
						</form>
					</div>
				</div>
				<div class="col-8">
					<div class="row section">
						<div class="col">
							<h2>All Players</h2>
							<div class="players container">
								<div class="row">
									<div class="col-2 individualPlayer">Player Name</div>
									<div class="col-2 individualPlayer">Player Name</div>
									<div class="col-2 individualPlayer">Player Name</div>
									<div class="col-2 individualPlayer">Player Name</div>
									<div class="col-2 individualPlayer">Max Char: ~20 charac</div>
									<div class="col-2 individualPlayer">Player Name Name</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row section">
						<div class="col-6">
							<h2>Your Role - Mafia</h2>
							<!-- Should show this for roled players but not villagers -->
							<h4>Other Mafias</h4>
							<div class="players container">
								<div class="row justify-content-center">
									<div class="col-3 roledPlayer">Player Name</div>
									<div class="col-3 roledPlayer">Player Name</div>
									<div class="col-3 roledPlayer">Player Name</div>
								</div>
							</div>
						</div>
						<div class="col-6">
							<h2>Actions</h2>
							<h4>Choose X Victims</h4>
							<!-- May need to turn this into a form with a submit button -->
							<div class="players container">
								<div class="row justify-content-center">
									<div class="col-3 actionPlayer">Player Name</div>
									<div class="col-3 actionPlayer">Player Name</div>
									<div class="col-3 actionPlayer">Player Name</div>
								</div>
							</div>
							<div class="row">
								<div class="col-6">
									<p>Confirm (Y/N)</p>
								</div>
								<div class="col-6">
									<p>Confirmed: 2/4</p>
								</div>
							</div>
						</div>
					</div>
					<div class="row section">
						<div class="col">
							<h1>Game Log</h1>
							<div class="gameLog"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
